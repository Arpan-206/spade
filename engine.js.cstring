"let setTimeout,setInterval,clearInterval,clearTimeout;const{setSolids:setSolids,setPushables:setPushables,setLegend:setLegend,setBackground:setBackground,addText:addText,clearText:clearText,setMap:setMap,addSprite:addSprite,clearTile:clearTile,getGrid:getGrid,getTile:getTile,getFirst:getFirst,getAll:getAll,tilesWith:tilesWith,width:width,height:height,bitmap:bitmap,tune:tune,map:map,onInput:onInput,afterInput:afterInput,playTune:playTune}=(()=>{const e={setMap:e=>native.setMap(e.trim())};e.addSprite=native.addSprite,e.getGrid=native.getGrid,e.getTile=native.getTile,e.tilesWith=native.tilesWith,e.clearTile=native.clearTile,e.getFirst=native.getFirst,e.getAll=native.getAll,e.width=native.width,e.height=native.height,e.setBackground=native.setBackground,e.addText=(e,t={})=>{console.log(\"engine.js:addText\");const n=Math.floor((21-e.length)/2);native.text_add(e,t.color??[10,10,40],t.x??n,t.y??0)},e.clearText=()=>native.text_clear(),e.setLegend=(...e)=>{console.log(\"engine.js:setLegend\"),native.legend_clear();for(const[t,n]of e)native.legend_doodle_set(t,n.trim());native.legend_prepare()},e.setSolids=e=>{console.log(\"engine.js:setSolids\"),native.solids_clear(),e.forEach(native.solids_push)},e.setPushables=e=>{console.log(\"engine.js:setPushables\"),native.push_table_clear();for(const[t,n]of Object.entries(e))for(const e of n)native.push_table_set(t,e)};let t=[];e.afterInput=e=>(console.log(\"engine.js:afterInputs\"),t.push(e));const n={pinToHandlers:{5:[],7:[],6:[],8:[],12:[],14:[],13:[],15:[]},keyToPin:{w:\"5\",s:\"7\",a:\"6\",d:\"8\",i:\"12\",k:\"14\",j:\"13\",l:\"15\"}};native.press_cb((e=>{n.pinToHandlers[e].forEach((e=>e())),t.forEach((e=>e())),native.map_clear_deltas()}));{let e=[],t=0;setTimeout=(n,i)=>(e.push({fn:n,ms:i,id:t}),t++),setInterval=(n,i)=>(e.push({fn:n,ms:i,id:t,restartAt:i}),t++),clearTimeout=clearInterval=t=>{e=e.filter((e=>e.id!=t))},native.frame_cb((t=>{const n=1e3*t;e=e.filter((t=>{if(t.ms<=0){if(t.fn(),!e.some((e=>e==t)))return!1;if(void 0===t.restartAt)return!1;t.ms=t.restartAt}return t.ms-=n,!0}))}))}function i(e){return(t,...n)=>{if(\"string\"==typeof t)throw new Error(\"Tagged template literal must be used like name`text`, instead of name(`text`)\");const i=t.reduce(((e,t,i)=>e+t+(n[i]??\"\")),\"\");return e(i)}}return e.onInput=(e,t)=>{console.log(\"engine.js:onInput\");const i=n.keyToPin[e];if(void 0===i)throw new Error(`the sprig doesn't have a \"${e}\" button!`);n.pinToHandlers[i].push(t)},e.playTune=()=>{},e.bitmap=i((e=>e)),e.tune=i((e=>e)),e.map=i((e=>e)),e})();\n"
"setInterval(() => console.log('hi'), 1000);\n"
